<template name="coinItem">

    <div data-name="coinItem" class="page">
        <div class="navbar">
            <div class="navbar-inner navbar-current">
                <div class="left"></div>
                <div class="title">Монета</div>
                <div class="right"></div>
            </div>
        </div>
        <div class="page-content">

            {{#with item}}
                <div class="block-title">
                    <img src="https://picsum.photos/70/70/?random" align="left" style="margin-right: 1em">
                    <h3 style="vertical-align: middle">{{name}}</h3>
                </div>

                <div class="block">
                    <div class="list">
                        <ul>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">
                                            <div class="item-header">Создатель</div>
                                            {{user.name}}
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">
                                            <div class="item-header">Видимость</div>
                                            {{#if public}}
                                                Публичная
                                            {{else}}
                                                Не публичная
                                            {{/if}}
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">
                                            <div class="item-header">Монет в обращении</div>
                                            {{moneyFormat count}}
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="accordion-item">
                                <div class="item-content item-link">
                                    <div class="item-inner">
                                        <div class="item-title">Краткое описание</div>
                                    </div>
                                </div>
                                <div class="accordion-item-content">
                                    <div class="block">
                                        <p>
                                            {{description}}
                                        </p>
                                    </div>
                                </div>
                            </li>
                            <li class="accordion-item">
                                <div class="item-content item-link">
                                    <div class="item-inner">
                                        <div class="item-title">Как можно заработать</div>
                                    </div>
                                </div>
                                <div class="accordion-item-content">
                                    <div class="block">
                                        <ul>
                                            {{#each condition}}
                                                <li>
                                                    <div class="item-content">
                                                        <div class="item-inner">
                                                            <div class="item-title">{{name}}</div>
                                                            <div class="item-after">{{moneyFormat price}}</div>
                                                        </div>
                                                    </div>
                                                </li>
                                            {{/each}}
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="accordion-item">
                                <div class="item-content item-link">
                                    <div class="item-inner">
                                        <div class="item-title">На что можно потратить</div>
                                    </div>
                                </div>
                                <div class="accordion-item-content">
                                    <div class="block">
                                        <ul>
                                            {{#each spend}}
                                                <li>
                                                    <div class="item-content">
                                                        <div class="item-inner">
                                                            <div class="item-media"><img
                                                                    src="https://picsum.photos/30/30/?random"
                                                                    style="margin-right: 10px"></div>
                                                            <div class="item-title">{{name}}</div>
                                                            <div class="item-after">{{moneyFormat price}}</div>
                                                        </div>
                                                    </div>
                                                </li>
                                            {{/each}}
                                        </ul>
                                    </div>
                                </div>
                            </li>

                            <li class="{{#if isMy}}goTo_coinItemParty{{/if}}">
                                <div class="item-content {{#if isMy}}item-link{{/if}}">
                                    <div class="item-inner">
                                        <div class="item-title">Участники ({{owner.length}})</div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                {{#unless isMy}}
                    <div class="block">
                        <p class="row">
                            <button id="enroll" class="col button button-big button-fill">Зачисление</button>
                            <button id="offs" class="col button button-big">Списание</button>
                        </p>
                    </div>
                {{else}}
                    {{#with request_enroll}}
                        <div class="block-title">
                            Запрос на зачисление
                        </div>
                        <div class="data-table">
                            <table>
                                <thead>
                                <tr>
                                    <th class="label-cell">От участника</th>
                                    <th class="label-cell">За что</th>
                                    <th class="numeric-cell">Цена</th>
                                </tr>
                                </thead>
                                <tbody>
                                {{#each .}}
                                    <tr class="{{backgroundByIndex @index}} actionEnroll" data-id="{{_id}}">
                                        <td class="label-cell">{{user.name}}</td>
                                        <td class="label-cell">{{name}}</td>
                                        <td class="numeric-cell">{{price}}</td>
                                    </tr>
                                {{/each}}
                                </tbody>
                            </table>
                        </div>
                    {{/with}}
                    {{#with request_offs}}
                        <div class="block-title">
                            Запрос на списание
                        </div>
                        <div class="data-table">
                            <table>
                                <thead>
                                <tr>
                                    <th class="label-cell">От участника</th>
                                    <th class="label-cell">За что</th>
                                    <th class="numeric-cell">Цена</th>
                                </tr>
                                </thead>
                                <tbody>
                                {{#each .}}
                                    <tr class="{{backgroundByIndex @index}} actionOffs" data-id="{{_id}}">
                                        <td class="label-cell">{{user.name}}</td>
                                        <td class="label-cell">{{name}}</td>
                                        <td class="numeric-cell">{{price}}</td>
                                    </tr>
                                {{/each}}
                                </tbody>
                            </table>
                        </div>
                    {{/with}}
                {{/unless}}
            {{/with}}
        </div>
    </div>
    {{>coinItemParty}}
    {{>coinItemPartyAdd}}
    {{>coinItemPartyItem}}
</template>

<template name="coinItemParty">

    <div data-name="coinItemParty" class="page stacked">
        <div class="navbar">
            <div class="navbar-inner navbar">
                <div class="left"><a href="#" onclick="event.preventDefault();mainView.router.back('/coinItem');"
                                     class="link back"><i class="icon icon-back" style=""></i><span class="ios-only">Назад</span></a>
                </div>
                <div class="title">Участники монеты</div>
                <div class="right">
                    <div class="coinItemPartyAdd icon">
                        +
                    </div>
                </div>
            </div>
        </div>
        <div class="page-content">

            <div class="searchbar-backdrop"></div>

            <form class="searchbar">
                <div class="searchbar-inner">
                    <div class="searchbar-input-wrap">
                        <input type="search" placeholder="Search">
                        <i class="searchbar-icon"></i>
                        <span class="input-clear-button"></span>
                    </div>
                    <span class="searchbar-disable-button">Cancel</span>
                </div>
            </form>

            <a href="#" class="coinItemPartyAdd margin button button-big margin-vertical">Добавить участника</a>

            <div class="list contacts-list">
                {{#each contact_list}}
                    <div class="list-group">
                        <ul>
                            <!--li class="list-group-title">{{litera}}</li-->
                            {{#each list}}
                                <li class="partyItem" data-id="{{_id}}">
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">{{name}}</div>
                                        </div>
                                    </div>
                                </li>
                            {{/each}}
                        </ul>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
</template>

<template name="coinItemPartyAdd">
    <div data-name="coinItemPartyAdd" class="page stacked">
        <div class="navbar">
            <div class="navbar-inner navbar">
                <div class="left"><a href="#" onclick="event.preventDefault();mainView.router.back('/coinItemParty');"
                                     class="link back"><i class="icon icon-back" style=""></i><span class="ios-only">Назад</span></a>
                </div>
                <div class="title">Добавить участника монеты из контактов</div>
                <div class="right"></div>
            </div>
        </div>
        <div class="page-content">
            <div class="searchbar-backdrop"></div>
            <form class="searchbar">
                <div class="searchbar-inner">
                    <div class="searchbar-input-wrap">
                        <input type="search" placeholder="Search">
                        <i class="searchbar-icon"></i>
                        <span class="input-clear-button"></span>
                    </div>
                    <span class="searchbar-disable-button">Cancel</span>
                </div>
            </form>
            <div class="list contacts-list">
                {{#each contact_list}}
                    <div class="list-group">
                        <ul>
                            <li class="list-group-title">{{litera}}</li>
                            {{#each list}}
                                <li class="itemAdd" data-id="{{_id}}">
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">{{name}}</div>
                                        </div>
                                    </div>
                                </li>
                            {{/each}}
                        </ul>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
</template>

<template name="coinItemPartyItem">
    <div data-name="coinItemPartyItem" class="page stacked">
        <div class="navbar">
            <div class="navbar-inner navbar">
                <div class="left"><a href="#" onclick="event.preventDefault();mainView.router.back('/coinItemParty');"
                                     class="link back"><i class="icon icon-back" style=""></i><span class="ios-only">Назад</span></a>
                </div>
                <div class="title">Участник монеты</div>
                <div class="right"></div>
            </div>
        </div>
        <div class="page-content">
            {{#with item}}
                <div class="list inline-labels no-hairlines-md">
                    <ul>
                        <li class="item-content item-input">
                            <div class="item-media">
                                <i class="icon demo-list-icon"></i>
                            </div>
                            <div class="item-inner">
                                <div class="item-title item-label">Имя</div>
                                <div class="item-input-wrap">
                                    {{concact.name}}
                                </div>
                            </div>
                        </li>
                        <li class="item-content item-input">
                            <div class="item-media">
                                <i class="icon demo-list-icon"></i>
                            </div>
                            <div class="item-inner">
                                <div class="item-title item-label">Телефон</div>
                                <div class="item-input-wrap">
                                    {{concact.phone}}
                                </div>
                            </div>
                        </li>
                        <li class="item-content item-input">
                            <div class="item-media">
                                <i class="icon demo-list-icon"></i>
                            </div>
                            <div class="item-inner">
                                <div class="item-title item-label">{{coin.name}}</div>
                                <div class="item-input-wrap">
                                    {{wallet.count}}
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="block">
                    <p class="row">
                        <button id="enroll" class="col button button-big button-fill">Зачисление</button>
                        <button class="col button button-big">Списание</button>
                    </p>
                </div>
            {{/with}}
        </div>
    </div>
</template>